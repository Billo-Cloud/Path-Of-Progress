<!-- views/partials/sections/create-quest.ejs -->
<section id="create-quest" class="section tab-content">
    <div class="create-quest-container">
        <h2 class="section-title">Cr√©er une nouvelle qu√™te</h2>

        <!-- Templates de qu√™tes -->
        <div class="quest-templates">
            <h3>Templates populaires</h3>
            <div class="templates-grid">
                <% const templates = [
                    { name: 'M√©ditation', stat: 'discipline', difficulty: 'facile', timer: 10, icon: 'üßò' },
                    { name: 'Lecture', stat: 'connaissance', difficulty: 'moyen', icon: 'üìö' },
                    { name: 'Exercice', stat: 'sante', difficulty: 'difficile', timer: 30, icon: 'üí™' },
                    { name: '√âtude', stat: 'connaissance', difficulty: 'moyen', timer: 45, icon: 'üìù' },
                    { name: 'Cr√©ativit√©', stat: 'creativite', difficulty: 'facile', icon: 'üé®' },
                    { name: 'Social', stat: 'relations', difficulty: 'moyen', icon: 'üë•' }
                ] %>
                
                <% templates.forEach(template => { %>
                    <div class="template-card" onclick="useTemplate('<%= JSON.stringify(template) %>')">
                        <div class="template-icon"><%= template.icon %></div>
                        <div class="template-info">
                            <h4><%= template.name %></h4>
                            <span class="template-stat">
                                <%= stats[template.stat].emoji %> <%= stats[template.stat].label %>
                            </span>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>

        <!-- Dans create-quest.ejs -->
		<form id="createQuestForm" class="create-quest-form">
			<!-- Nom de la qu√™te -->
			<div class="form-group">
				<label for="quest-name">Nom de la qu√™te</label>
				<input type="text" id="quest-name" name="quest-name" required placeholder="Ex: M√©diter pendant 10 minutes" class="form-input">
			</div>

			<!-- Statistique -->
			<div class="form-group">
				<label for="quest-stat">Statistique</label>
				<select id="quest-stat" name="stat" required class="form-select">
					<option value="">Choisir une statistique</option>
					<% Object.entries(stats).forEach(([key, stat]) => { %>
						<option value="<%= key %>" data-icon="<%= stat.emoji %>">
							<%= stat.emoji %> <%= stat.label %>
						</option>
					<% }) %>
				</select>
			</div>

			<!-- Difficult√© -->
			<div class="form-group">
				<label for="difficulty-group">Difficult√©</label>
				<input type="hidden" id="selected-difficulty" name="difficulty" value="facile">
				<div class="difficulty-buttons" role="radiogroup" aria-labelledby="difficulty-label">
					<button type="button" class="difficulty-btn" data-value="facile" role="radio">
						<div class="diff-content">
							<div class="diff-header">Facile</div>
							<div class="diff-xp">5 XP</div>
							<div class="diff-time">~15 min</div>
						</div>
					</button>
					<button type="button" class="difficulty-btn" data-value="moyen" role="radio">
						<div class="diff-content">
							<div class="diff-header">Moyen</div>
							<div class="diff-xp">10 XP</div>
							<div class="diff-time">~30 min</div>
						</div>
					</button>
					<button type="button" class="difficulty-btn" data-value="difficile" role="radio">
						<div class="diff-content">
							<div class="diff-header">Difficile</div>
							<div class="diff-xp">15 XP</div>
							<div class="diff-time">~1 heure</div>
						</div>
					</button>
				</div>
			</div>

			<!-- Planification -->
			<div class="form-group">
				<label for="quest-date">Date</label>
				<input type="date" id="quest-date" name="scheduled-date" required class="form-input" 
					min="<%= new Date().toISOString().split('T')[0] %>"
					max="<%= new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] %>">
			</div>

			<div class="form-group">
				<label for="quest-time">Cr√©neau horaire</label>
				<select id="quest-time" name="time-slot" required class="form-select">
					<option value="">Choisir un cr√©neau</option>
					<option value="morning">üåÖ Matin </option>
					<option value="afternoon">‚òÄÔ∏è Apr√®s-midi </option>
					<option value="evening">üåô Soir√©e </option>
				</select>
			</div>

			<!-- Pr√©visualisation -->
			<div class="form-group preview-section">
				<h4>Pr√©visualisation</h4>
				<div class="quest-preview">
					<div class="quest-card">
						<div class="quest-content">
							<div class="quest-header">
								<span class="quest-emoji" id="preview-emoji"></span>
								<h3 class="quest-title" id="preview-title">Nom de la qu√™te</h3>
								<span class="quest-difficulty" id="preview-difficulty"></span>
							</div>
							<div class="quest-info">
								<span class="quest-type" id="preview-stat"></span>
								<span class="quest-reward" id="preview-xp"></span>
							</div>
							<div class="quest-schedule">
								<span class="schedule-date" id="preview-date"></span>
								<span class="schedule-time" id="preview-time"></span>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Boutons d'action -->
			<div class="form-actions">
				<button type="button" class="btn btn-secondary" onclick="switchTab('quests')">
					Annuler
				</button>
				<button type="submit" class="btn btn-primary">
					Cr√©er la qu√™te
				</button>
			</div>
		</form>
    </div>
</section>