<!-- views/partials/sections/quests.ejs -->
<section id="quests" class="section tab-content">
    <div class="quests-container">
        <h2 class="section-title">Qu√™tes Quotidiennes</h2>

        <!-- Filtres -->
        <div class="quest-filters">
            <input type="text" placeholder="Rechercher une qu√™te..." class="search-input">
            <div class="filter-group">
                <select id="stat-filter">
                    <option value="">Toutes les statistiques</option>
                    <% Object.entries(stats).forEach(([key, stat]) => { %>
                        <option value="<%= key %>"><%= stat.emoji %> <%= stat.label %></option>
                    <% }) %>
                </select>
                <select id="difficulty-filter">
                    <option value="">Toutes les difficult√©s</option>
                    <option value="facile">Facile</option>
                    <option value="moyen">Moyen</option>
                    <option value="difficile">Difficile</option>
                </select>
                <select id="status-filter">
                    <option value="">Tous les statuts</option>
                    <option value="pending">√Ä faire</option>
                    <option value="completed">Compl√©t√©es</option>
                </select>
            </div>
        </div>

        <!-- Timeline et qu√™tes -->
        <div class="quests-timeline-layout">
            <!-- Timeline -->
            <div class="timeline">
                <div class="timeline-progress" style="height: <%= (completedQuests / totalQuests) * 100 %>%"></div>
            </div>

            <!-- Grille des cr√©neaux -->
            <div class="time-slots-grid">
                <!-- Cr√©neau Matin -->
                <div class="time-slot-column">
                    <div class="time-slot-header">
                        <span class="time-slot-icon">üåÖ</span>
                        <h3>Matin</h3>
                        <span class="time-slot-hours">6h - 12h</span>
                    </div>
                    <div class="quests-list" data-slot="morning">
                        <% const morningQuests = organizedQuests.morning || [] %>
                        <% if (morningQuests.length > 0) { %>
                            <% morningQuests.forEach(quest => { %>
                                <%- include('../quest-card', { quest, stats }) %>
                            <% }) %>
                        <% } %>
                    </div>
                </div>

                <!-- Cr√©neau Apr√®s-midi -->
                <div class="time-slot-column">
                    <div class="time-slot-header">
                        <span class="time-slot-icon">‚òÄÔ∏è</span>
                        <h3>Apr√®s-midi</h3>
                        <span class="time-slot-hours">12h - 18h</span>
                    </div>
                    <div class="quests-list" data-slot="afternoon">
                        <% const afternoonQuests = organizedQuests.afternoon || [] %>
                        <% if (afternoonQuests.length > 0) { %>
                            <% afternoonQuests.forEach(quest => { %>
                                <%- include('../quest-card', { quest, stats }) %>
                            <% }) %>
                        <% } %>
                    </div>
                </div>

                <!-- Cr√©neau Soir -->
                <div class="time-slot-column">
                    <div class="time-slot-header">
                        <span class="time-slot-icon">üåô</span>
                        <h3>Soir</h3>
                        <span class="time-slot-hours">18h - 00h</span>
                    </div>
                    <div class="quests-list" data-slot="evening">
                        <% const eveningQuests = organizedQuests.evening || [] %>
                        <% if (eveningQuests.length > 0) { %>
                            <% eveningQuests.forEach(quest => { %>
                                <%- include('../quest-card', { quest, stats }) %>
                            <% }) %>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

        <!-- √âtat vide -->
        <% if (!hasAnyQuests) { %>
        <div class="empty-state">
            <div class="empty-icon">üéØ</div>
            <h3>Aucune qu√™te disponible</h3>
            <p>Cr√©ez une nouvelle qu√™te pour continuer votre progression !</p>
            <button onclick="switchTab('create-quest')" class="create-quest-btn">
                Cr√©er une qu√™te
            </button>
        </div>
        <% } %>
    </div>
</section>