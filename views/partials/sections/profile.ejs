<section id="profile" class="section tab-content" style="display: none;">
    <div class="profile-container">
        <!-- Section Avatar -->
        <div class="avatar-section">
            <h2 class="section-title">Mon Profil</h2>
            <div class="avatar-wrapper">
                <img src="<%= user.avatarUrl || '/images/default-avatar.png' %>" 
                     alt="Photo de profil" 
                     class="avatar-preview" 
                     id="avatarPreview">
                <label for="avatarInput" class="avatar-upload-btn">
                    <i data-lucide="camera"></i>
                </label>
                <input type="file" 
                       id="avatarInput" 
                       class="avatar-input" 
                       accept="image/*"
                       onchange="handleAvatarUpload(this)">
            </div>
            
            <h3 class="section-title">Personnalisation</h3>
            <div class="emoji-grid">
                <% const avatarEmojis = ['üë§', 'ü¶∏‚Äç‚ôÇÔ∏è', 'üßô‚Äç‚ôÇÔ∏è', 'ü¶π‚Äç‚ôÄÔ∏è', 'üßù‚Äç‚ôÇÔ∏è', 'üßö‚Äç‚ôÄÔ∏è', 'ü¶æ', 'üéÆ', 'üèÉ‚Äç‚ôÇÔ∏è', 'üßò‚Äç‚ôÇÔ∏è']; %>
                <% avatarEmojis.forEach((emoji, index) => { %>
                    <button class="emoji-btn <%= user.avatarEmoji === index ? 'selected' : '' %>"
                            onclick="setAvatarEmoji(<%= index %>)">
                        <%= emoji %>
                    </button>
                <% }); %>
            </div>
        </div>

        <!-- Section Stats Globales -->
        <div class="stats-section">
            <h2 class="section-title">Vue d'ensemble</h2>
            <div class="profile-stats">
                <div class="stat-highlight">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value"><%= user.questsCompleted %></div>
                    <div class="stat-label">Qu√™tes Compl√©t√©es</div>
                </div>

                <div class="stat-highlight">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-value">
                        <%= Object.values(user.stats).reduce((sum, stat) => sum + stat.level, 0) %>
                    </div>
                    <div class="stat-label">Niveau Total</div>
                </div>

                <div class="stat-highlight">
                    <div class="stat-icon">‚ú®</div>
                    <div class="stat-value"><%= user.totalXP %></div>
                    <div class="stat-label">XP Totale</div>
                </div>

                <div class="stat-highlight">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-value"><%= user.badges.length %></div>
                    <div class="stat-label">Badges D√©bloqu√©s</div>
                </div>
            </div>

        <!-- Badges & R√©compenses -->
		<div class="badges-section">
			<h2 class="section-title">Succ√®s D√©bloqu√©s</h2>
			<div class="badges-grid">
				<% const badges = [
					{ id: 'beginner', name: 'D√©butant', icon: 'üå±', description: 'Commencez votre voyage', color: '#4CAF50' },
					{ id: 'warrior', name: 'Guerrier', icon: '‚öîÔ∏è', description: 'Force niveau 5', color: '#FF5722' },
					{ id: 'scholar', name: '√ârudit', icon: 'üìö', description: 'Connaissance niveau 5', color: '#2196F3' },
					{ id: 'athlete', name: 'Athl√®te', icon: 'üèÉ', description: 'Sant√© niveau 5', color: '#FF9800' },
					{ id: 'artist', name: 'Artiste', icon: 'üé®', description: 'Cr√©ativit√© niveau 5', color: '#E91E63' },
					{ id: 'monk', name: 'Moine', icon: 'üßò', description: 'Discipline niveau 5', color: '#9C27B0' },
					{ id: 'leader', name: 'Leader', icon: 'üë•', description: 'Relations niveau 5', color: '#3F51B5' },
					{ id: 'merchant', name: 'Marchand', icon: 'üí∞', description: 'Richesse niveau 5', color: '#009688' }
				] %>
        
				<% badges.forEach(badge => { 
					const isUnlocked = user.badges.find(b => b.id === badge.id);
				%>
					<div class="badge-item <%= isUnlocked ? 'unlocked' : 'locked' %>"
						onclick="showBadgeDetails('<%= badge.id %>')"
						style="--badge-color: <%= badge.color %>">
						<div class="badge-icon">
							<%= badge.icon %>
						</div>
						<div class="badge-name"><%= badge.name %></div>
						<div class="badge-description">
							<%= isUnlocked ? 'D√©bloqu√© !' : badge.description %>
						</div>
					</div>
				<% }); %>
			</div>
        </div>
    </div>
</section>
